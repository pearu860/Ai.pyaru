<script>
    // এখানে আপনার কপি করা API Key টি দিন
    const API_KEY = "AIzaSyDZa1kK8KE2x-sRiEE2zSVWMSkjDnMYQqA";

    async function sendMessage() {
        const inputField = document.getElementById("user-input");
        const chatBox = document.getElementById("chat-box");
        const message = inputField.value;

        if (!message) return;

        // ব্যবহারকারীর মেসেজ স্ক্রিনে দেখানো
        chatBox.innerHTML += `<div class="message"><span class="user-msg">আপনি:</span> ${message}</div>`;
        inputField.value = "";
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            // Gemini API তে রিকোয়েস্ট পাঠানো
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ contents: [{ parts: [{ text: message }] }] })
            });

            const data = await response.json();
            
            // নতুন আপডেট: গুগল কি এরর দিচ্ছে তা স্ক্রিনে দেখানোর ব্যবস্থা
            if (data.error) {
                chatBox.innerHTML += `<div class="message"><span class="ai-msg" style="color:red;">Google Error:</span> ${data.error.message}</div>`;
            } 
            else if (data.candidates && data.candidates.length > 0) {
                const aiReply = data.candidates[0].content.parts[0].text;
                chatBox.innerHTML += `<div class="message"><span class="ai-msg">AI:</span> ${aiReply.replace(/\n/g, "<br>")}</div>`;
            } else {
                chatBox.innerHTML += `<div class="message"><span class="ai-msg">AI:</span> দুঃখিত, কোনো উত্তর পাওয়া যায়নি।</div>`;
            }
            
            chatBox.scrollTop = chatBox.scrollHeight;
        } catch (error) {
            chatBox.innerHTML += `<div class="message" style="color:red;">সিস্টেম ত্রুটি: ${error.message}</div>`;
        }
    }
</script>
